language: java
before_install:
- sudo rm /usr/local/bin/docker-compose
- curl -L http://github.com/docker/compose/releases/download/${DOCKER_COMPOSE_VERSION}/docker-compose-`uname -s`-`uname -m` > docker-compose
- chmod +x docker-compose
- sudo mv docker-compose /usr/local/bin
- docker login -u="$DOCKER_USERNAME" -p="$DOCKER_PASSWORD"
install:
- mvn install -Dmaven.javadoc.skip-true -B -V
- ls -l
- docker build --build-arg JAR_FILE=/target/lab10-backend.jar -t $DOCKER_USERNAME/se234-lab10-backend  .
- docker push dto80/se234-lab10-backend
- docker pull dto80/se234-lab10-client

script:
- docker-compose -H "$DOCKER_HOST" up -d
cache:
  directories:
  - "$HOME/.m2"
env:
  global:
  - secure: AGp65km1s7VoEnexrdReM7MvdgK0k75YzFYWx9BeRprc0rg3Kp7FFkNJv2ZDQA0IpQ3ivVB2DPMzosftvjuOIg62dsGPztD4UDkwS1KG5MOiaQaKHNapZwbdXL0KT8POcy/MR6/Id5WCQWi4cTKx8ZhyUH8LwSmqfA6KZE4I92t1ToRp9juwq5rfiBr+LG5wXsMqHh2RSvCLORjh3GSCCzVM+GLbf92sKz7/B2zbrGLin+duSHl1dK3HWB16SZmIC5z2lcLHh/rGDrCMSQjB/fZ3C7hoXlK4/D7fAN5DxAWKhggWDYIqnuqiwXSQXT15KO9pzH/MfG4KYQ8m0oOdIF5ur1OGjAdUUd1F2Uf0hatqeivPl57CBtvK0VGW6Xb0u77BKv4wqSYCKZVIVG4Y+yZP3J5QSW2QRVRQ9rOBDuFF8fC/IhrnxDqY2e/Hy35naTIF+qvMkKC3YnmxUVtN8HBYYgfHBQTziGc7SrwEXn05Xak8lURenBBUHajXaWqlTnHJvVGU/VyaX8SpQiOSOLLXOn25EgNqPYxh6P9wWrgDtECpKxKzc3qQ5ZlW7+0xxcA3yRMQkPO/AvYqbaFgPGBDtDWPH6eoMIYactMc4qCTrI4kRz49VqomwewmdIaXRQx7RVmw+EmA3E7vi9qFc3eS5ZGUopXJkWi5j+fn1Ig=
  - secure: ngb+pv3Q67Loqha97wjAzisS9Xvs4I3uFL45bbI7one4wKqNPVWaWvw/RYaCpBqvCSyn3iPNwu1nrtosVRaqrdj2trbZK5s24ypE18sD4ivA57R1+eXkml3lM/eUQCpvLt1rb/pnI0B3x51xm/5sBHR9iP0+7XwFn7UAdj+jaCvyNtWoL9k6U8BJEv1VbIoxsCyIpIlUIcV65xSUIiJ1xh2U6JtxumWv2eJH7yqo8vRdiNDp4NWHSet/iKTCiBmymZAlJ93BjLCtI90f6CWuGhHIQ1MXDZhr7a8XcMtMtNOTT1JCYkWyxgOUUp8HX+HMhPceeRE6C+JjRnf+Spl38usHGrenEj4ay3PcSKK1AVkroDpvCafBvFPipZS8O+ijycXGusQeKBEDSHDhjmIeguV/VGM1xkwWshTEw5yGKHuJDOCxf++OiN8FKi+Tqdy0f+2nHBa/8t4ZCqL4ltg/xySLcvOUaafrCNqGjZXhGJrhrFZT5RhRedzjdK3Huy0nmJg13y8m6I0h4LBk5Gc9lukwmQDYM8rKQ4yEq60nqorU3SXjp74T8/2oo5hI3ljQ14DpNENf7pIttfv68vrOpR2QaEUMRJUTEXCn1D/TE6RkJlagYPgJmIRfv+adUrLkc7weDeybLooy8UwHoZvhaN8fDJNFjZgXA4+GrD7yxAg=
  - secure: Q+lX/84SUxdwEW3QVmkGcEON9GfDb2bt14zJAA+WvKjoNtclcIqqoAOj0V+j7LB1023VBQz5BCzDuPD6sfR9CzVa8k0a4BGrM8+KSxsJhbos1Le7arACEdh2+MYnH+UVKvypDNvYXmmngmHkS22wiro+6N76M/gGMh/RVl9xTvQrErEvw0T3CW0Axz9hiWemVG+c7WKJMOKIbfSVtVS3DLlJg7oIaaspuioQxqKChx19eJsADCZMzZOMWKVRC0UrA19LatYCrkObgsT02pULXAR1qQvOLRuqR2P6b5HqXAMG3SjRj6s9t+NPS0UkjwuTzlkYQtizkV68YGZ77eCabIaLi9B6Apz2pBjU2YAkPm2YS5OQfKnxWSoXIltwQBZV6S1VyQ2Z1GeXQp0/PE6oW7col3s1BxrSDiQygATjiTUA/xLdu0xZh/0++urhE5nP5KXW/9+8hXYHvd9te3Ofre11CxDUYs85NboQUwxZvyZefKFCOEdWoujLGQAAXW8Suqoi0kxZ15opGuHfDXybwVL4KSr3FHLhorP2caMRDxmQCj36u7WAnBmSjJ8Lfe4FgyWTSOhgjDZxif3/WlBjgaD9w5FLIQok9VgAYA88R8fVzz3hVUC9RybtgTSHPk3nUrF9z5Zez4riPLRqvXoKx+jPBrpeBiGpAf4T/z4lejs=
  - secure: D9tpsLKAnsksB2gwkdNDnarWHlkdSGI1yRlQ1bGDAhIEz0Dr1JqgpruFgWzkNa680vQ1F5ZQdGsJEo+1zTLoaGsLcIESBg3PjUhZ3PGiEe1F+0QK74BZw2gIRQySur4HDcIm9ePErwWUX26yMwV4HN/NZ/fqIczjIwIcySBpE56+/rOyXQY7F2Cwu/HN02yc9e47BFjdpjRmSzMwa8oCc96POXSg1nHz6a9PAm250mplWpJom7u46nkT7TaKMAMIzz7PqEuFzc7CNNxfUofWxv6Tf3lFhE7kMDU8PnMTYHdmDNVg3XpM3A8yBTcW0CRmyQvBDPExZgDea+4lgbtk3LLerbdnrP/IfJTsTfwm+HvCEz4ccFT/kkHW5/L45iQDzPxBfaQD8jq8QGRUVnRiOLRe7cRDGjNm73m2PHhybiUY1P/dWk8bdQEK+ehKsanPmr6m2el2512pCPod2JMVZ524QcKswMvmQY+XP14soaPYzf9ZKtXLkeVPOcvCqmMCAQrGgG1dX9pPKb3FFj2Emo5vxdIwjtBVYtlnWvVF1P+2GwVi7q8304pAZKVrQ/KENB61wqP6zHjKx1VrjDK8xoeqQpER1HApunm0FmtXpgAsTeJxVWfvE5BdNtLQNnLProM5yF8Pt/oONosg60bPstnDKzbnWp/MzAvC6RpfLkk=
